<!-- Temporary file to build the new properties panel HTML structure -->
<!-- This will be integrated into dashboard-editor.hbs later -->

<h6 class="mb-3">
    <i class="fas fa-cube"></i> 
    <span id="widget-title">Widget Properties</span>
</h6>

<!-- Sensor Mapping (always visible) -->
<div class="form-group">
    <label><i class="fas fa-satellite-dish"></i> Sensor Mapping</label>
    <select class="form-control form-control-sm widget-sensor" id="prop-sensor">
        <option value="">Select sensor...</option>
        <option value="kc">Engine RPM</option>
        <option value="kd">Speed (OBD)</option>
        <option value="kff1001">Speed (GPS)</option>
        <option value="k5">Coolant Temp</option>
        <option value="kf">Intake Air Temp</option>
        <option value="kb">Manifold Pressure</option>
        <option value="k4">Engine Load</option>
        <option value="k10">MAF Rate</option>
        <option value="k2f">Fuel Level</option>
        <option value="kff1225">Torque</option>
        <option value="kff1226">Horsepower</option>
    </select>
</div>

<hr>

<!-- Tabs Navigation -->
<ul class="nav nav-tabs nav-fill" id="propTabs" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="tab-general" data-toggle="tab" href="#pane-general" role="tab">
            <small><i class="fas fa-sliders-h"></i> General</small>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="tab-display" data-toggle="tab" href="#pane-display" role="tab">
            <small><i class="fas fa-eye"></i> Display</small>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="tab-angles" data-toggle="tab" href="#pane-angles" role="tab">
            <small><i class="fas fa-sync-alt"></i> Angles</small>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="tab-colors" data-toggle="tab" href="#pane-colors" role="tab">
            <small><i class="fas fa-palette"></i> Colors</small>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="tab-images" data-toggle="tab" href="#pane-images" role="tab">
            <small><i class="fas fa-image"></i> Images</small>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="tab-anim" data-toggle="tab" href="#pane-anim" role="tab">
            <small><i class="fas fa-play-circle"></i> Anim</small>
        </a>
    </li>
</ul>

<!-- Tabs Content -->
<div class="tab-content mt-3" id="propTabContent">
    
    <!-- GENERAL TAB -->
    <div class="tab-pane fade show active" id="pane-general" role="tabpanel">
        <div class="form-group">
            <label>Label</label>
            <input type="text" class="form-control form-control-sm" id="prop-label">
        </div>
        <div class="form-group">
            <label>Unit</label>
            <input type="text" class="form-control form-control-sm" id="prop-unit">
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label>Min Value</label>
                    <input type="number" class="form-control form-control-sm" id="prop-min">
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label>Max Value</label>
                    <input type="number" class="form-control form-control-sm" id="prop-max">
                </div>
            </div>
        </div>
    </div>

    <!-- DISPLAY TAB -->
    <div class="tab-pane fade" id="pane-display" role="tabpanel">
        <div class="custom-control custom-checkbox mb-2">
            <input type="checkbox" class="custom-control-input" id="prop-show-value">
            <label class="custom-control-label" for="prop-show-value">Show Value</label>
        </div>
        <div class="custom-control custom-checkbox mb-2">
            <input type="checkbox" class="custom-control-input" id="prop-show-unit">
            <label class="custom-control-label" for="prop-show-unit">Show Unit</label>
        </div>
        <div class="custom-control custom-checkbox mb-2">
            <input type="checkbox" class="custom-control-input" id="prop-show-label">
            <label class="custom-control-label" for="prop-show-label">Show Label</label>
        </div>
        <div class="custom-control custom-checkbox mb-3">
            <input type="checkbox" class="custom-control-input" id="prop-show-numbers">
            <label class="custom-control-label" for="prop-show-numbers">Show Scale Numbers</label>
        </div>
        
        <div class="form-group">
            <label>Value Format</label>
            <input type="text" class="form-control form-control-sm" id="prop-value-format" placeholder="e.g. 0, 0.0, 0.00">
            <small class="text-muted">Number of decimal places (0 = integer)</small>
        </div>
        
        <div class="form-group">
            <label>Value Position</label>
            <select class="form-control form-control-sm" id="prop-value-position">
                <option value="center">Center</option>
                <option value="top">Top</option>
                <option value="bottom">Bottom</option>
                <option value="custom">Custom (X, Y)</option>
            </select>
        </div>
        
        <div id="custom-position-controls" style="display: none;">
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <label>Custom X</label>
                        <input type="number" class="form-control form-control-sm" id="prop-value-x">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label>Custom Y</label>
                        <input type="number" class="form-control form-control-sm" id="prop-value-y">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label>Value Font Size</label>
                    <input type="number" class="form-control form-control-sm" id="prop-value-size" min="8" max="120">
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label>Unit Font Size</label>
                    <input type="number" class="form-control form-control-sm" id="prop-unit-size" min="8" max="120">
                </div>
            </div>
        </div>
    </div>

    <!-- ANGLES & ROTATION TAB (for circular widgets) -->
    <div class="tab-pane fade" id="pane-angles" role="tabpanel">
        <div class="form-group">
            <label>Rotation (degrees)</label>
            <input type="range" class="custom-range" id="prop-rotation" min="0" max="360" step="15">
            <small class="text-muted">Value: <span id="rotation-value">0</span>°</small>
        </div>
        
        <div class="form-group">
            <label>Start Angle</label>
            <input type="number" class="form-control form-control-sm" id="prop-start-angle" min="0" max="360">
            <small class="text-muted">Gauge start position (0-360°)</small>
        </div>
        
        <div class="form-group">
            <label>End Angle</label>
            <input type="number" class="form-control form-control-sm" id="prop-end-angle" min="0" max="720">
            <small class="text-muted">Gauge end position (allows >360° for full circles)</small>
        </div>
        
        <hr>
        
        <div class="custom-control custom-checkbox mb-2">
            <input type="checkbox" class="custom-control-input" id="prop-show-ticks">
            <label class="custom-control-label" for="prop-show-ticks">Show Ticks</label>
        </div>
        
        <div class="form-group">
            <label>Tick Count</label>
            <input type="number" class="form-control form-control-sm" id="prop-tick-count" min="0" max="100">
        </div>
        
        <div class="form-group">
            <label>Major Tick Interval</label>
            <input type="number" class="form-control form-control-sm" id="prop-major-tick" min="1" max="10">
            <small class="text-muted">Every Nth tick is major (with number)</small>
        </div>
        
        <div class="form-group">
            <label>Tick Length</label>
            <input type="number" class="form-control form-control-sm" id="prop-tick-length" min="1" max="50">
        </div>
    </div>

    <!-- COLORS TAB -->
    <div class="tab-pane fade" id="pane-colors" role="tabpanel">
        <div class="form-group">
            <label>Primary Color</label>
            <input type="color" class="form-control form-control-sm" id="prop-primary-color">
        </div>
        <div class="form-group">
            <label>Secondary Color</label>
            <input type="color" class="form-control form-control-sm" id="prop-secondary-color">
        </div>
        <div class="form-group">
            <label>Text Color</label>
            <input type="color" class="form-control form-control-sm" id="prop-text-color">
        </div>
        <div class="form-group" id="needle-color-group">
            <label>Needle Color</label>
            <input type="color" class="form-control form-control-sm" id="prop-needle-color">
            <small class="text-muted">Leave empty to use primary/zone color</small>
        </div>
        
        <hr>
        <h6>Color Zones</h6>
        <div class="custom-control custom-checkbox mb-2">
            <input type="checkbox" class="custom-control-input" id="prop-use-zones">
            <label class="custom-control-label" for="prop-use-zones">Enable Color Zones</label>
        </div>
        
        <div id="zones-container" style="display: none;">
            <button type="button" class="btn btn-sm btn-success btn-block mb-2" id="add-zone-btn">
                <i class="fas fa-plus"></i> Add Zone
            </button>
            <div id="zones-list"></div>
        </div>
    </div>

    <!-- IMAGES TAB -->
    <div class="tab-pane fade" id="pane-images" role="tabpanel">
        <div class="form-group">
            <label>Background Image</label>
            <div class="input-group input-group-sm">
                <input type="text" class="form-control" id="prop-bg-image" placeholder="URL...">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="upload-bg-btn" title="Upload">
                        <i class="fas fa-upload"></i>
                    </button>
                    <button class="btn btn-outline-secondary" type="button" id="browse-bg-btn" title="Browse">
                        <i class="fas fa-images"></i>
                    </button>
                </div>
            </div>
            <input type="file" id="bg-file-input" accept="image/*" style="display: none;">
        </div>
        
        <div class="form-group">
            <label>Background Opacity</label>
            <input type="range" class="custom-range" id="prop-bg-opacity" min="0" max="1" step="0.1">
            <small class="text-muted">Value: <span id="bg-opacity-value">0.5</span></small>
        </div>
        
        <hr>
        
        <div class="form-group">
            <label>Foreground Image (optional)</label>
            <div class="input-group input-group-sm">
                <input type="text" class="form-control" id="prop-fg-image" placeholder="URL...">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="upload-fg-btn" title="Upload">
                        <i class="fas fa-upload"></i>
                    </button>
                    <button class="btn btn-outline-secondary" type="button" id="browse-fg-btn" title="Browse">
                        <i class="fas fa-images"></i>
                    </button>
                </div>
            </div>
            <input type="file" id="fg-file-input" accept="image/*" style="display: none;">
        </div>
        
        <div class="form-group">
            <label>Foreground Opacity</label>
            <input type="range" class="custom-range" id="prop-fg-opacity" min="0" max="1" step="0.1">
            <small class="text-muted">Value: <span id="fg-opacity-value">1.0</span></small>
        </div>
        
        <div class="form-group">
            <label>Image Fill Mode</label>
            <select class="form-control form-control-sm" id="prop-image-fill-mode">
                <option value="linear">Linear (straight fill)</option>
                <option value="circular">Circular (arc fill)</option>
            </select>
        </div>
        
        <div id="image-angles-group">
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <label>Image Start Angle</label>
                        <input type="number" class="form-control form-control-sm" id="prop-image-start-angle" min="0" max="360">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label>Image End Angle</label>
                        <input type="number" class="form-control form-control-sm" id="prop-image-end-angle" min="0" max="360">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ANIMATION TAB -->
    <div class="tab-pane fade" id="pane-anim" role="tabpanel">
        <div class="form-group">
            <label>Smoothing</label>
            <input type="range" class="custom-range" id="prop-smoothing" min="0" max="1" step="0.05">
            <small class="text-muted">Value: <span id="smoothing-value">0.2</span> (0=instant, 1=very smooth)</small>
        </div>
        
        <div class="form-group">
            <label>Update Delay (ms)</label>
            <input type="number" class="form-control form-control-sm" id="prop-delay" min="0" max="5000" step="100">
            <small class="text-muted">Delay before value updates</small>
        </div>
        
        <div class="form-group">
            <label>Animation Duration (ms)</label>
            <input type="number" class="form-control form-control-sm" id="prop-anim-duration" min="0" max="2000" step="50">
        </div>
        
        <div class="form-group">
            <label>Animation Easing</label>
            <select class="form-control form-control-sm" id="prop-anim-easing">
                <option value="linear">Linear</option>
                <option value="ease-in">Ease In</option>
                <option value="ease-out">Ease Out</option>
                <option value="ease-in-out">Ease In-Out</option>
            </select>
        </div>
    </div>

</div>

<!-- Needle settings (for gauge widgets only, shown after tabs) -->
<div id="needle-settings" style="display: none;">
    <hr>
    <h6><i class="fas fa-location-arrow"></i> Needle Settings</h6>
    <div class="row">
        <div class="col-6">
            <div class="form-group">
                <label>Needle Length</label>
                <input type="range" class="custom-range" id="prop-needle-length" min="0.1" max="1" step="0.05">
                <small class="text-muted"><span id="needle-length-value">0.7</span></small>
            </div>
        </div>
        <div class="col-6">
            <div class="form-group">
                <label>Needle Width</label>
                <input type="number" class="form-control form-control-sm" id="prop-needle-width" min="1" max="20">
            </div>
        </div>
    </div>
</div>

<!-- Indicator Light specific settings -->
<div id="indicator-settings" style="display: none;">
    <hr>
    <h6><i class="fas fa-lightbulb"></i> Indicator Settings</h6>
    
    <div class="form-group">
        <label>Shape</label>
        <select class="form-control form-control-sm" id="prop-shape">
            <option value="circle">Circle</option>
            <option value="square">Square</option>
            <option value="triangle">Triangle</option>
            <option value="icon">Icon (Custom Image)</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>Size</label>
        <input type="number" class="form-control form-control-sm" id="prop-size" min="10" max="200">
    </div>
    
    <div class="form-group">
        <label>Icon URL (if shape=icon)</label>
        <input type="text" class="form-control form-control-sm" id="prop-icon-url">
    </div>
    
    <div class="row">
        <div class="col-6">
            <div class="form-group">
                <label>On Color</label>
                <input type="color" class="form-control form-control-sm" id="prop-on-color">
            </div>
        </div>
        <div class="col-6">
            <div class="form-group">
                <label>Off Color</label>
                <input type="color" class="form-control form-control-sm" id="prop-off-color">
            </div>
        </div>
    </div>
    
    <div class="form-group">
        <label>Glow Intensity</label>
        <input type="range" class="custom-range" id="prop-glow-intensity" min="0" max="50">
        <small class="text-muted">Value: <span id="glow-intensity-value">20</span></small>
    </div>
    
    <hr>
    <h6>Trigger Condition</h6>
    
    <div class="form-group">
        <label>Condition Type</label>
        <select class="form-control form-control-sm" id="prop-condition-type">
            <option value="threshold">Threshold</option>
            <option value="range">Range</option>
            <option value="always">Always On</option>
        </select>
    </div>
    
    <div id="threshold-settings">
        <div class="form-group">
            <label>Operator</label>
            <select class="form-control form-control-sm" id="prop-threshold-op">
                <option value="<">&lt; Less Than</option>
                <option value=">">&gt; Greater Than</option>
                <option value="<=">&lt;= Less or Equal</option>
                <option value=">=">&gt;= Greater or Equal</option>
                <option value="==">== Equal</option>
                <option value="!=">!= Not Equal</option>
            </select>
        </div>
        <div class="form-group">
            <label>Threshold Value</label>
            <input type="number" class="form-control form-control-sm" id="prop-threshold-value">
        </div>
    </div>
    
    <div id="range-settings" style="display: none;">
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label>Range Min</label>
                    <input type="number" class="form-control form-control-sm" id="prop-range-min">
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label>Range Max</label>
                    <input type="number" class="form-control form-control-sm" id="prop-range-max">
                </div>
            </div>
        </div>
    </div>
    
    <hr>
    <h6>Blinking</h6>
    
    <div class="form-group">
        <label>Blink Pattern</label>
        <select class="form-control form-control-sm" id="prop-blink-pattern">
            <option value="steady">Steady</option>
            <option value="blink">Blink</option>
            <option value="fast-blink">Fast Blink</option>
            <option value="pulse">Pulse</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>Blink Speed (ms)</label>
        <input type="number" class="form-control form-control-sm" id="prop-blink-speed" min="50" max="5000" step="50">
    </div>
</div>

<hr>
<button type="button" class="btn btn-sm btn-danger btn-block" id="delete-widget-btn">
    <i class="fas fa-trash"></i> Delete Widget
</button>

